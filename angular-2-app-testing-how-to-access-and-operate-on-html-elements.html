<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Angular 2 App Testing, how to access and operate on html elements? -</title><meta name=robots content="index,follow,noarchive"><meta name=description content="I have an Angular 2 Frontend to be tested, I found on a Site ( https://kendaleiv.com/angular-2-component-testing-template-using-testbed/ ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements. My App has an Input Form element, once the input signal has been sent through the Form Element it show a results set on an InfoBox element. So what I would like to do is to retrieve the element Form from the TestBed provide a String to search with it and get the response from the Input box."><meta name=author content="Reinaldo Massengill"><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/app.css><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/an-old-hope.min.css><script defer src=https://assets.cdnweb.info/hugo/paper/js/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=./theme.png><link rel=icon href=./favicon.ico><link rel=apple-touch-icon href=./apple-touch-icon.png><meta name=generator content="Hugo 0.98.0"><meta property="og:title" content="Angular 2 App Testing, how to access and operate on html elements?"><meta property="og:description" content="I have an Angular 2 Frontend to be tested, I found on a Site ( https://kendaleiv.com/angular-2-component-testing-template-using-testbed/ ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements."><meta property="og:type" content="article"><meta property="og:url" content="/angular-2-app-testing-how-to-access-and-operate-on-html-elements.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-05-10T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-10T00:00:00+00:00"><meta itemprop=name content="Angular 2 App Testing, how to access and operate on html elements?"><meta itemprop=description content="I have an Angular 2 Frontend to be tested, I found on a Site ( https://kendaleiv.com/angular-2-component-testing-template-using-testbed/ ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements."><meta itemprop=datePublished content="2024-05-10T00:00:00+00:00"><meta itemprop=dateModified content="2024-05-10T00:00:00+00:00"><meta itemprop=wordCount content="408"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Angular 2 App Testing, how to access and operate on html elements?"><meta name=twitter:description content="I have an Angular 2 Frontend to be tested, I found on a Site ( https://kendaleiv.com/angular-2-component-testing-template-using-testbed/ ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements."></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=./index.html>ZingX</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector(".btn-dark"),sysDark=window.matchMedia("(prefers-color-scheme: dark)"),darkVal=localStorage.getItem("dark"),setDark=e=>{bodyClx[e?"add":"remove"]("dark"),localStorage.setItem("dark",e?"yes":"no")};setDark(darkVal?darkVal==="yes":sysDark.matches),requestAnimationFrame(()=>bodyClx.remove("not-ready")),btnDark.addEventListener("click",()=>setDark(!bodyClx.contains("dark"))),sysDark.addEventListener("change",e=>setDark(e.matches))</script><nav class=menu><a href=./sitemap.xml>Sitemap</a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>May 10, 2024</time>
<span>Reinaldo Massengill</span></p><h1>Angular 2 App Testing, how to access and operate on html elements?</h1></header><section class=post-content><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>I have an Angular 2 Frontend to be tested, I found on a Site ( <a href=# rel="nofollow noreferrer">https://kendaleiv.com/angular-2-component-testing-template-using-testbed/</a> ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements.</p><p>My App has an Input Form element, once the input signal has been sent through the Form Element it show a results set on an InfoBox element. So what I would like to do is to retrieve the element Form from the TestBed provide a String to search with it and get the response from the Input box. (Test 3)</p><p>1) How do I retrieve the elements (form and InfoBox)?</p><p>2) How do I get the signal to be processed from the InfoBox?</p><p>3) How can I retrieve the result set from the InfoBox Element once the signal has been processed?</p><p>Here is the code sample that I’m using, when I run it with the command ‘ng test’ it starts Chrome and the first two tests are working.</p><pre><code>describe('AppComponent', () =&gt; { beforeEach(async(() =&gt; { TestBed.configureTestingModule({ declarations: [ AgsResultsComponent, AppComponent, FormularComponent, FormularAutocompleteComponent, InfoBoxComponent, InfoBoxAgencyDetailsComponent, InfoBoxAgencyItemComponent ], providers: [ConfigurationService], schemas: [NO_ERRORS_SCHEMA] }).compileComponents(); })); // Test 1 it('should create the app', async(() =&gt; { const fixture = TestBed.createComponent(AppComponent); const app = fixture.debugElement.componentInstance; console.log(app); expect(app).toBeTruthy(); })); // Test 2 it('should render agsheading in a h1 tag', async(() =&gt; { const fixture = TestBed.createComponent(AppComponent); fixture.detectChanges(); const compiled = fixture.debugElement.nativeElement; expect(compiled.querySelector('h1').textContent).toContain('Agentursuche'); })); // Test 3 it('should execute a search using Form', async(() =&gt; { const formular = TestBed.createComponent(FormularComponent); const infoBox = TestBed.createComponent(InfoBoxComponent); formular.detectChanges(); infoBox.detectChanges(); const formularCompiled = formular.debugElement.nativeElement; const infoBoxCompiled = infoBox.debugElement.nativeElement; formularCompiled.sendInput('Just a Test'); expect(infoBoxCompiled).toContain(something); })); }); </code></pre><span class=d-none itemprop=commentCount></span><h2 class=mb0 data-answercount=1>1 Answer</h2><p>You should use another beforeEach method to create the components and store them in a local variable, so you avoid writing the same thing in each test.</p><p>In order to fetch html elements from the component one can use the query method on the debug element:</p><pre><code>const inputDebugElement = formular.debugElement.query(By.css('input')); const inputHtmlElement = inputDebugElement.nativeElement as HTMLInputElement; </code></pre><p>Once you have that, you can set values on it and dispatch events:</p><pre><code>inputHtmlElement.value = 'foo'; inputHtmlElement.dispatchEvent(new Event('input')); </code></pre><p>Remember that in order to trigger the change detection you need to call detectChanges() on the fixture and after that wait for it to be stable with whenStable() call or call tick() inside a fakeAsync test.</p><p>Would recommend to read the <a href=# rel="nofollow noreferrer">official testing guidelines</a> to get a better insight on how to test Angular applications.</p><span class=d-none itemprop=commentCount>3</span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJoa25wYGeAeYOOmqWgrZyWv25%2BjJqnqWWkmsC1tc2gZKGnp2LBsHnAnJqeq6Nirq%2BwjKinnqqRqbJuu81mn62lnGKyrbHMnqWtqw%3D%3D</p></section><nav class=post-nav><a class=prev href=./the-best-valentines-day-movies-for-kids.html><span>←</span><span>The Best Valentine's Day Movies for Kids</span></a>
<a class=next href=./hell-michigan.html><span>Go To Hell? The People Of Hell, Michigan Already Have</span><span>→</span></a></nav></article></main><footer class=footer><p>&copy; 2024 <a href=./></a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>